### XSS(Cross-Site Scripting)

- XSS는 웹 애플리케이션에서 일어나는 취약점으로 관리자가 아닌 권한이 없는 사용자가 웹 사이트에 스크립트를 삽입하는 공격 기법이다
- 사용자가 글을 쓰고 읽을 수 있는 게시판 혹은 사용자의 입력 값을 웹 페이지에 보여주는 곳에서도 발생한다
- C&C 서버로 리다이렉션 하기위해 리다이렉션 스트립트를 주입하여 중간 경유지로 활용하기도 하고, 사용자의 쿠키를 탈취하여 세션 하이재킹 공격을 수행하기도 한다
- XSS 공격에 취약한 웹사이트에 스트립트를 삽입하고 해당 스크립트가 있는 게시글을 열람한 사용자는 악성 스크립트에 의해 자신의 쿠키가 해커에게 전송되게 된다, 세션ID가 포함된 쿠키를 탈취하여 해커가 해당 계정으로 로그인 할 수 있다

### Persistent(Stored) XSS

- 삽입된 악성 스크립트가 데이터베이스에 저장되어 해당 스크립트가 있는 게시글 등을 열람한 사용자들은 악성 스크립트가 작동하며 쿠키를 탈취당하거나 다른 사이트로 리다이렉션 되는 공격을 받게 된다. 데이터베이스에 저장이 되어 지속적으로 공격한다고 하여 Persistent XSS 라고 부르며, 데이터베이스에 저장이 되므로 Stored XSS 라고도 부른다

- 사용자가 입력한 값이 데이터베이스에 저장이 되고, 저장된 값이 그대로 뷰에 나타내주는 곳에 공격이 성공할 가능성이 크다
- 사용자의 입력에 대한 검증이 없기 때문에 발생한다

### Reflected XSS

- 사용자에게 입력 받은 값을 서버에서 되돌려 주는 곳에서 발생한다. 보통 공격자가 악의적인 스크립트와 함께 URL을 사용자에게 누르도록 유도한 후 URL을 누른 사용자는 악의적인 스크립트가 실행되며 공격을 당하게 된다
- 검색 인자로 작성한 스크립트를 URL에 심어서 해당 URL을 클릭하게 되면 사용자의 쿠키 값을 전송하게 된다

### DOM based XSS

- DOM(Document Object Model) 기반 XSS 공격
- 악의적인 스크립트가 포함 된 URL을 사용자가 요청하게 되어 브라우저를 해석하는 단계에서 발생하는 공격으로 클라이언트 측 코드가 원래 의도와는 다르게 실행된다
- DOM based XSS 공격은 다른 XSS 공격과는 다르게 서버 측에서 탐지가 어렵다
- 특수문자 #을 이용하는데, # 이후의 값은 서버로 전송되지 않는 기능을 가지고 있다
- 사용자의 요청에 따라 HTML을 다르게 해석하는 부분에 공격이 가능하다

### XSS 대응방안

- 입출력 값 검증
  - 사용자가 입력한 값에 대한 검증 및 입력된 값을 그대로 출력할 때 검증이 필요하다. XSS Cheat Sheet에 대한 필터 목록을 만들어 모든 Cheat Sheet에 대한 대응이 가능하도록 한다
- XSS 방어 라이브러리, 브라우저 확장앱 사용
- 웹 방화벽 사용
- 타임리프의 escaping 기능으로도 방지할 수 있다

### CSRF(Cross-Site Request Forgery)

- CSRF 역시 웹 애플리케이션에서 일어나는 취약점으로 공격자의 권한을 도용하여 수정, 삭제, 등록 등을 웹사이트에 요청하게 만드는 공격이다
- CSRF 공격이 이루어지려면 다음 조건이 충족되어야 한다
  - 위조 요청을 전송하는 서비스에 희생자가 로그인한 상태
  - 희생자가 해커가 만든 피싱 사이트에 접속